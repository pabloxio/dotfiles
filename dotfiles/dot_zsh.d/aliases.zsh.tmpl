# vim: ft=zsh

# Bat - a cat clone with wings
# https://github.com/sharkdp/bat
if which bat >/dev/null; then
  alias cat='bat'
fi

# aws-vault
if which aws-vault >/dev/null; then
  alias av-exec='aws-vault exec $AWSVAULT --duration=${AWSVAULT_DURATION:-1h} -- '
  alias av-creds='aws-vault exec $AWSVAULT --duration=1h -- env |grep ^AWS_ |while read line; do echo export "$line"; done'
  alias av-login='aws-vault login $AWSVAULT'
fi

if which kubectl >/dev/null; then
  if which aws-vault >/dev/null; then
    alias kube='av-exec kubectl'
  else
    alias kube='kubectl'
  fi
fi

if which k9s >/dev/null; then
  if which aws-vault >/dev/null; then
    alias k9s='av-exec k9s'
  fi
fi

if which kube-burner >/dev/null; then
  if which aws-vault >/dev/null; then
    alias kube-burner='av-exec kube-burner'
  fi
fi

if which virtctl >/dev/null; then
  if which aws-vault >/dev/null; then
    alias virtctl='av-exec virtctl'
  fi
fi

if which helm > /dev/null; then
  if which aws-vault >/dev/null; then
    alias helm='av-exec helm'
  fi
fi

if which terragrunt >/dev/null; then
  if which aws-vault >/dev/null; then
    alias terragrunt='av-exec terragrunt'
  fi
fi
{{- if eq .chezmoi.os "darwin" }}

# GNU base64
if which gbase64 >/dev/null; then
  alias base64='gbase64'
fi
{{- end }}
